{
  "hash": "0873f114478d627ca5ece2e84168440f",
  "result": {
    "markdown": "---\ntitle: \"Rendering networks of influencing factors in R Markdown\"\ndescription: \"Explaining the assumptions and goals of research projects by including reference and impact models into R Markdown documents through `Graphviz` and `DiagrammeR`.\"\nauthor: \"Ivan Dubrovin\"\ndate: \"2022-04-22\"\ncategories: [R Markdown, DRM]\nbibliography: \"/Users/ivan/Projects/nondeterministic-woodlands/bibliography.bib\"\nimage: preview.png\n---\n\nI have recently completed a course titled \"Research Methodology for Engineering Systems.\"\nIt was an introduction to PhD level research strategies in the multidisciplinary applied setting, where it's often hard to separate scientific questions from purely engineering ones.\nThe main resource for the course was the book \"DRM, a Design Research Methodology\" [-@blessingDRM2009].\nOne of the tools the book introduces is the framework of the **networks of influencing factors**.\nIt is a very intuitive way to represent and explain the assumptions and the goals of a research project.\nI realized how useful they are when noticed that I started using them without even thinking.\nThis post is about describing these networks with [`Graphviz`](https://graphviz.org/) and rendering them in R Markdown documents with [`DiagrammeR`](https://rich-iannone.github.io/DiagrammeR/).\n\n# What is DRM?\n\nDesign Research Methodology is a self-explanatory name.\nIt is a collection of guidelines and methods that can be used as a framework for *design research*, where design research is the development of understanding and support for *design*, and design is a process of developing a product from a need.\nIn simpler words, it is a manual on navigating research in applied multidisciplinary fields.\nIf that sounds interesting, I recommend reading the second chapter of the DRM book that gives an overview of the framework.\nMy own explanations that follow are by no means comprehensive.\nThey aim more at demonstrating the possibilities of `Graphviz` and `DiagrammeR`.\n\n# `Graphviz` and `DiagrammeR`\n\n`Graphviz` is an open source tool for visualizing graphs.\nIt provides an intuitive abstract language to define graphs using plain text and a rendering engine that renders this text to visual formats.\nBelow is an example of the syntax for defining a simple graph.\n\n```dot\ndigraph my_graph {\n  rankdir = \"LR\"\n  \n  B [shape = \"box\", label = \"middle\"]\n  \n  node [shape = \"ellipse\"]\n  \n  A -> B\n  \n  node [color = \"green\"]\n  \n  A -> C [style = \"dashed\", label = \"shortcut\"]\n  B -> C\n}\n```\n\n[All possible attributes are described in `Graphviz` documentation.]{.aside}\n\nThis definition creates a directed graph called `my_graph`.\n`rankdir = LR` tells `Graphviz` to render the graph from left to right.\n`B [shape = box, label = middle]` creates a new node `B` that will be rendered as a box with a label `middle`.\n`node [shape = ellipse]` makes all nodes defined below this line to be rendered as ellipses.\n`A -> B` creates an edge from a new node `A` to the defined above node `B`.\n`node [color = green]`  makes all nodes defined below to be green.\n`A -> C [style = dashed, label = shortcut]` creates a dashed edge with a label from `A` to a new node `C`.\nThe quotes around the values are not required, but I think they create a visual separation and make the definition easier on the eyes.\nThis graph is visualized below.\n\n`DiagrammeR` is an R package for working with network graph diagrams.\nIt allows creating and analyzing graphs directly through R, but also offers a possibility to render `Graphviz` graphs.\nThe function for that is `DiagrammeR::grViz()`.\nIt can read a graph definition directly from a string, or it can read a graph defined in a file.\nI prefer separating the graphs from the R code to avoid headaches with escaping quotes and newlines when the graphs are not trivial.\nThis is how a call to render the above defined graph from a file and the result look like:\n\n::: {.cell}\n\n```{.r .cell-code}\nDiagrammeR::grViz(here::here(\"posts\", \"2022-04-rendering-drm-models\", \"example.gv\"))\n```\n\n::: {#fig-example-graph .cell-output-display}\n```{=html}\n<div id=\"htmlwidget-3ff0dfa51d3a45d0f885\" style=\"width:100%;height:139px;\" class=\"grViz html-widget\"></div>\n<script type=\"application/json\" data-for=\"htmlwidget-3ff0dfa51d3a45d0f885\">{\"x\":{\"diagram\":\"digraph my_graph {\\n  rankdir = \\\"LR\\\"\\n  B [shape = \\\"box\\\", label = \\\"middle\\\"]\\n  node [shape = \\\"ellipse\\\"]\\n  A -> B\\n  node [color = \\\"green\\\"]\\n  A -> C [style = \\\"dashed\\\", label = \\\"shortcut\\\"]\\n  B -> C\\n}\",\"config\":{\"engine\":\"dot\",\"options\":null}},\"evals\":[],\"jsHooks\":[]}</script>\n```\n\n\nAn example graph.\n:::\n:::\n\n# Networks of influencing factors\n\nIn DRM, it’s important to describe existing and desired situations.\nThe description of the existing situation helps to directly describe the problem at hand and the current understanding of why the problem occurs.\nThe description of the desired situation helps to describe how the proposed solution is supposed to address the problem.\n\nThe tool to visualize and describe the existing and desired situations proposed in DRM is called **networks of influencing factors**.\nAn **influencing factor** is an aspect of the described situation that influences other aspects.\nFor example, `quality of product` might have an influence on `satisfaction of customer`.\nA factor is formulated as an **attribute** of an **element**, and it has to be measurable or possible to assess.\nFactors are visualized as ellipse nodes of a directed graph, and the influences that factors have on each other are represented by edges.\nBelow is an example of a supposed relationship between quality of the product with customer satisfaction.\nThe graph says: *\"according to source [5], better product quality leads to greater customer satisfaction\"*.\n\n::: {.cell}\n::: {#fig-example-relationship .cell-output-display}\n```{=html}\n<div id=\"htmlwidget-41ed6caaca1650ee8966\" style=\"width:100%;height:92px;\" class=\"grViz html-widget\"></div>\n<script type=\"application/json\" data-for=\"htmlwidget-41ed6caaca1650ee8966\">{\"x\":{\"diagram\":\"digraph a {\\n  rankdir = LR\\n  q [label = \\\"quality of\\nproduct\\\"]\\n  s [label = \\\"satisfaction\\nof customer\\\"]\\n  q -> s [taillabel = \\\"+\\\", headlabel = \\\"+\\\", label = \\\"[5]\\\"]\\n}\",\"config\":{\"engine\":\"dot\",\"options\":null}},\"evals\":[],\"jsHooks\":[]}</script>\n```\n\n\nThe relationship between two influencing factors visualized as a graph.\n:::\n:::\n\nTwo types of networks of influencing factors are the **reference model** and the **impact model**.\nThe former describes the existing situation and is used as a reference to compare the results to, hence the name.\nThe latter describes the desired situation and shows how the proposed solution affects the factors.\nThe proposed solution, or *support*, is represented by a hexagonal node connected to the factors that it addresses.\nFor example, the graph below shows that the proposed solution is to improve problem definition process, and it is assumed to improve the quality of problem definition.\n\n::: {.cell}\n::: {#fig-example-support .cell-output-display}\n```{=html}\n<div id=\"htmlwidget-0b59e625845cea1bd905\" style=\"width:100%;height:92px;\" class=\"grViz html-widget\"></div>\n<script type=\"application/json\" data-for=\"htmlwidget-0b59e625845cea1bd905\">{\"x\":{\"diagram\":\"digraph a {\\n  rankdir = LR\\n  s [label = \\\"support\\nproblem\\ndefinition\\\", shape = \\\"hexagon\\\"]\\n  q [label = \\\"quality of\\nproblem\\ndefinition\\\"]\\n  s -> q [headlabel = \\\"+\\\", label = \\\"[A]\\\"]\\n}\",\"config\":{\"engine\":\"dot\",\"options\":null}},\"evals\":[],\"jsHooks\":[]}</script>\n```\n\n\nThe relationship between the proposed support and an influencing factor.\n:::\n:::\n\nThis simple approach allows to describe complex research problems in a universal and intuitive way.\nThey are simple to explain and help to give an overview of the project even to people that are not in the same field.\nBelow I use this approach to recreate the example reference and impact models from the second chapter of the DRM book to show that it's easy to extend this approach to more complex graphs.\n\n# More complex examples\n\nHere is the contents of the `reference.gv` file with a definition of the reference model:\n\n```dot\ndigraph reference_model {\n  rankdir = \"BT\"\n  fontsize = 11\n  overlap = \"false\"\n\n  node [shape = \"ellipse\"]\n  problem_quality [label = \"quality of\\nproblem\\ndefinition\"]\n\n  modification_no [label = \"number of\\nmodifications\"]\n  time_spent [label = \"% of design\\ntime spent on\\nmodifications\"]\n\n  product_quality [label = \"quality of\\nproduct\"]\n  markt_time [label = \"time-to-\\nmarket\"]\n\n  satisfaction [label = \"satisfaction\\nof customer\"]\n  profit [label = \"amount of\\nprofit\"]\n\n  node [style = \"dashed\"]\n  cost [label = \"cost of\\nproduction\"]\n\n  edge [arrowsize = 0.4, labeldistance = 1]\n  problem_quality -> modification_no [taillabel = \"-\", headlabel = \"0\", label = \"[1]\"]\n  problem_quality -> modification_no [taillabel = \"-\", headlabel = \"+\", label = \"[2]\"]\n  problem_quality -> time_spent [taillabel = \"-\", headlabel = \"+\", label = \"[1]\"]\n\n  modification_no -> time_spent [taillabel = \"+\", headlabel = \"+\", label = \"[E]\"]\n  modification_no -> product_quality [taillabel = \"+\", headlabel = \"0\", label = \"[3]\"]\n  time_spent -> markt_time [taillabel = \"+\", headlabel = \"+\", label = \"[A]\"]\n\n  product_quality -> satisfaction [taillabel = \"+\", headlabel = \"+\", label = \"[5]\"]\n  product_quality -> profit [taillabel = \"-\", headlabel = \"-\", label = \"[4]\"]\n  markt_time -> profit [taillabel = \"+\", headlabel = \"-\", label = \"[4]\"]\n  cost -> profit\n}\n```\n\nAnd a simple function call to render the graph:\n\n::: {.cell}\n\n```{.r .cell-code}\nDiagrammeR::grViz((here::here(\"posts\", \"2022-04-rendering-drm-models\", \"reference.gv\")))\n```\n\n::: {#fig-reference-model .cell-output-display}\n```{=html}\n<div id=\"htmlwidget-0d91ae506f12ac68c41c\" style=\"width:100%;height:557px;\" class=\"grViz html-widget\"></div>\n<script type=\"application/json\" data-for=\"htmlwidget-0d91ae506f12ac68c41c\">{\"x\":{\"diagram\":\"digraph reference_model {\\n  rankdir = \\\"BT\\\"\\n  fontsize = 11\\n  overlap = \\\"false\\\"\\n\\n  node [shape = \\\"ellipse\\\"]\\n  problem_quality [label = \\\"quality of\\\\nproblem\\\\ndefinition\\\"]\\n\\n  modification_no [label = \\\"number of\\\\nmodifications\\\"]\\n  time_spent [label = \\\"% of design\\\\ntime spent on\\\\nmodifications\\\"]\\n\\n  product_quality [label = \\\"quality of\\\\nproduct\\\"]\\n  markt_time [label = \\\"time-to-\\\\nmarket\\\"]\\n\\n  satisfaction [label = \\\"satisfaction\\\\nof customer\\\"]\\n  profit [label = \\\"amount of\\\\nprofit\\\"]\\n\\n  node [style = \\\"dashed\\\"]\\n  cost [label = \\\"cost of\\\\nproduction\\\"]\\n\\n  edge [arrowsize = 0.4, labeldistance = 1]\\n  problem_quality -> modification_no [taillabel = \\\"-\\\", headlabel = \\\"0\\\", label = \\\"[1]\\\"]\\n  problem_quality -> modification_no [taillabel = \\\"-\\\", headlabel = \\\"+\\\", label = \\\"[2]\\\"]\\n  problem_quality -> time_spent [taillabel = \\\"-\\\", headlabel = \\\"+\\\", label = \\\"[1]\\\"]\\n\\n  modification_no -> time_spent [taillabel = \\\"+\\\", headlabel = \\\"+\\\", label = \\\"[E]\\\"]\\n  modification_no -> product_quality [taillabel = \\\"+\\\", headlabel = \\\"0\\\", label = \\\"[3]\\\"]\\n  time_spent -> markt_time [taillabel = \\\"+\\\", headlabel = \\\"+\\\", label = \\\"[A]\\\"]\\n\\n  product_quality -> satisfaction [taillabel = \\\"+\\\", headlabel = \\\"+\\\", label = \\\"[5]\\\"]\\n  product_quality -> profit [taillabel = \\\"-\\\", headlabel = \\\"-\\\", label = \\\"[4]\\\"]\\n  markt_time -> profit [taillabel = \\\"+\\\", headlabel = \\\"-\\\", label = \\\"[4]\\\"]\\n  cost -> profit\\n}\",\"config\":{\"engine\":\"dot\",\"options\":null}},\"evals\":[],\"jsHooks\":[]}</script>\n```\n\n\nA recreation of Figure 2.3 \"A Reference Model representing the – partly assumed – existing situation\" from the DRM book.\n:::\n:::\n\nAnd the same for the impact model:\n\n```dot\ndigraph impact_model {\n  rankdir = \"BT\"\n  fontsize = 11\n  overlap = \"false\"\n\n  node [shape = \"hexagon\"]\n  support [label = \"support\\nproblem\\ndefinition\"]\n\n  node [shape = \"ellipse\"]\n  problem_quality [label = \"quality of\\nproblem\\ndefinition\"]\n\n  modification_no [label = \"number of\\nmodifications\"]\n  time_spent [label = \"% of design\\ntime spent on\\nmodifications\"]\n\n  product_quality [label = \"quality of\\nproduct\"]\n  eval_quality [label = \"quality of\\ndesign\\nevaluation\"]\n  markt_time [label = \"time-to-\\nmarket\"]\n\n  satisfaction [label = \"satisfaction\\nof customer\"]\n  profit [label = \"amount of\\nprofit\"]\n\n  node [style = \"dashed\"]\n  cost [label = \"cost of\\nproduction\"]\n\n  edge [arrowsize = 0.4, labeldistance = 1]\n  support -> problem_quality [headlabel = \"+\", label = \"[A]\"]\n\n  problem_quality -> time_spent [taillabel = \"+\", headlabel = \"-\", label = \"[A]\"]\n  problem_quality -> modification_no [taillabel = \"+\", headlabel = \"-\", label = \"[A]\"]\n  problem_quality -> eval_quality [taillabel = \"+\", headlabel = \"+\", label = \"[A]\"]\n\n  modification_no -> time_spent [taillabel = \"-\", headlabel = \"-\", label = \"[E]\"]\n  eval_quality -> product_quality [taillabel = \"+\", headlabel = \"+\", label = \"[A]\"]\n  time_spent -> markt_time [taillabel = \"-\", headlabel = \"-\", label = \"[A]\"]\n\n  product_quality -> satisfaction [taillabel = \"+\", headlabel = \"+\", label = \"[5]\"]\n  product_quality -> profit [taillabel = \"+\", headlabel = \"+\", label = \"[A]\"]\n  markt_time -> profit [taillabel = \"-\", headlabel = \"+\", label = \"[A]\"]\n  cost -> profit\n}\n```\n\n::: {.cell}\n\n```{.r .cell-code}\nDiagrammeR::grViz((here::here(\"posts\", \"2022-04-rendering-drm-models\", \"impact.gv\")))\n```\n\n::: {#fig-impact-model .cell-output-display}\n```{=html}\n<div id=\"htmlwidget-727967afe4b6de1c265d\" style=\"width:100%;height:557px;\" class=\"grViz html-widget\"></div>\n<script type=\"application/json\" data-for=\"htmlwidget-727967afe4b6de1c265d\">{\"x\":{\"diagram\":\"digraph impact_model {\\n  rankdir = \\\"BT\\\"\\n  fontsize = 11\\n  overlap = \\\"false\\\"\\n\\n  node [shape = \\\"hexagon\\\"]\\n  support [label = \\\"support\\\\nproblem\\\\ndefinition\\\"]\\n\\n  node [shape = \\\"ellipse\\\"]\\n  problem_quality [label = \\\"quality of\\\\nproblem\\\\ndefinition\\\"]\\n\\n  modification_no [label = \\\"number of\\\\nmodifications\\\"]\\n  time_spent [label = \\\"% of design\\\\ntime spent on\\\\nmodifications\\\"]\\n\\n  product_quality [label = \\\"quality of\\\\nproduct\\\"]\\n  eval_quality [label = \\\"quality of\\\\ndesign\\\\nevaluation\\\"]\\n  markt_time [label = \\\"time-to-\\\\nmarket\\\"]\\n\\n  satisfaction [label = \\\"satisfaction\\\\nof customer\\\"]\\n  profit [label = \\\"amount of\\\\nprofit\\\"]\\n\\n  node [style = \\\"dashed\\\"]\\n  cost [label = \\\"cost of\\\\nproduction\\\"]\\n\\n  edge [arrowsize = 0.4, labeldistance = 1]\\n  support -> problem_quality [headlabel = \\\"+\\\", label = \\\"[A]\\\"]\\n\\n  problem_quality -> time_spent [taillabel = \\\"+\\\", headlabel = \\\"-\\\", label = \\\"[A]\\\"]\\n  problem_quality -> modification_no [taillabel = \\\"+\\\", headlabel = \\\"-\\\", label = \\\"[A]\\\"]\\n  problem_quality -> eval_quality [taillabel = \\\"+\\\", headlabel = \\\"+\\\", label = \\\"[A]\\\"]\\n\\n  modification_no -> time_spent [taillabel = \\\"-\\\", headlabel = \\\"-\\\", label = \\\"[E]\\\"]\\n  eval_quality -> product_quality [taillabel = \\\"+\\\", headlabel = \\\"+\\\", label = \\\"[A]\\\"]\\n  time_spent -> markt_time [taillabel = \\\"-\\\", headlabel = \\\"-\\\", label = \\\"[A]\\\"]\\n\\n  product_quality -> satisfaction [taillabel = \\\"+\\\", headlabel = \\\"+\\\", label = \\\"[5]\\\"]\\n  product_quality -> profit [taillabel = \\\"+\\\", headlabel = \\\"+\\\", label = \\\"[A]\\\"]\\n  markt_time -> profit [taillabel = \\\"-\\\", headlabel = \\\"+\\\", label = \\\"[A]\\\"]\\n  cost -> profit\\n}\",\"config\":{\"engine\":\"dot\",\"options\":null}},\"evals\":[],\"jsHooks\":[]}</script>\n```\n\n\nA recreation of Figure 2.6 \"An Impact Model, representing the – partly assumed – desired situation after the introduction of the support (represented as an hexagonal element)\" from the DRM book.\n:::\n:::\n\n# Conclusions\n\nHere is a quote from the DRM book that I think best describes this tool:\n\n> Our students found developing Reference and Impact Models to be a powerful method to clarify their thoughts, structure their understanding and reveal their assumptions. In our opinion, developing such models as a research community would reveal our current understanding of design and could act as an important basis for future research.\n\nI noticed that I started using them even when making notes during discussions.\nIt is a concise and intuitive way to describe complex ideas.\n`Graphviz` and `DiagrammeR` make including them into R Markdown reports very easy and straightforward.",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<script src=\"../../site_libs/htmlwidgets-1.5.4/htmlwidgets.js\"></script>\n<script src=\"../../site_libs/viz-1.8.2/viz.js\"></script>\n<link href=\"../../site_libs/DiagrammeR-styles-0.2/styles.css\" rel=\"stylesheet\" />\n<script src=\"../../site_libs/grViz-binding-1.0.9/grViz.js\"></script>\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": null
  }
}